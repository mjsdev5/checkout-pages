import { Meta, Story, Preview } from "@storybook/addon-docs/blocks";
import { action } from "@storybook/addon-actions";

import { Formik } from "formik";
import * as Yup from "yup";

import FormStylesStories from "./styles/FormStylesStories.js";
import { SelectCountry } from "../components/Forms/common/SelectCountry.js";
import { Checkbox } from "../components/Forms/common/Checkbox.js";
import { TextInput } from "../components/Forms/common/TextInput.js";
import { PrimaryButton } from "../components/ui/Buttons.js";

<Meta title="Form" />

# Complete Form

Complete Form including TextInputs, Checkbox, SelectCountry, and PrimaryButton components.

## Usage

This is a complete form using TextInput, Checkbox, SelectCountry and Primary Button components. They all have initial values and a Validation Schema created with `Yup`. Validation errors displayed if any of the tags if firstly touched without adding any data or if you click the submit button and the field is empty or violating the provided schema restrictions. `Formik` takes control of the submit state and creates a values object including all the data from the form.

<Preview withToolbar>
  <Story name="Form">
    <FormStylesStories>
      <Formik
        initialValues={{
          firstName: "",
          lastName: "",
          country: "",
          terms: false,
        }}
        validationSchema={Yup.object({
          firstName: Yup.string().required("This field is mandatory"),
          lastName: Yup.string().required("This field is mandatory"),
          country: Yup.string().required("This field is mandatory"),
          terms: Yup.boolean().oneOf([true], "You have to agree to the terms"),
        })}
      >
        {(formik) => (
          <form onSubmit={formik.handleSubmit}>
            <TextInput
              id="firstName"
              name="firstName"
              type="text"
              label="First Name"
            />
            <TextInput
              id="lastName"
              name="lastName"
              type="text"
              label="Last Name"
            />
            <SelectCountry id="country" name="country">
              <option value="">Select Country</option>
              <option id="italy" value="italy">
                Italy
              </option>
              <option id="Greece" value="greece">
                Greece
              </option>
            </SelectCountry>
            <Checkbox id="terms" name="terms" type="checkbox">
              I agree to the Terms
            </Checkbox>
            <PrimaryButton onClick={action("form-submitted")}>
              Submit
            </PrimaryButton>
          </form>
        )}
      </Formik>
    </FormStylesStories>
  </Story>
</Preview>
